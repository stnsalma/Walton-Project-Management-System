@using System.Web.Mvc.Html
@using ProjectManagement.Infrastructures.Helper
@model ProjectManagement.ViewModels.Software.VmSwQcSpecificationModified
@{
    ViewBag.Title = "AddMoreIssues";
    
}
<script src="~/Scripts/moment.js"></script>

<script src="~/Content/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
<link href="~/Content/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css" />

<div class="note note-success">
    <p style="color: green;font-size: 20px;"> Raise More Issues </p>
</div>

@using (@Html.BeginForm("AddMoreIssues", "Software", FormMethod.Post, new { enctype = "multipart/form-data", id = "form1" }))
{
    <div class="portlet box green">
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-picture"></i>Project select & Assign
            </div>

        </div>

        <div class="portlet-body" style="display: block;">
            <div class="row">
              
                <div class="col-sm-1"></div>
                <div class="col-lg-2">
                    Select Project
                </div>
                <div class="col-lg-8">
                    @if (Model != null && Model.ProjectMasterModelsList.Any() && Model.SwQcInchargeAssignModels.Any() && Model.SwQcAssignModels.Any())
                    {
                        <div class="col-lg-8">

                          @Html.DropDownListFor(model => model.CombinedProjectId, new SelectList(ViewBag.CombinedIds, "Value", "Text"), new { @class = "form-control ddChosen" })

                        </div>
                        <div class="col-lg-3">
                            <input type="button" id="btnforname" class="btn sbold uppercase btn-outline blue" value="Load Project" onclick="location.href='@Url.Action("AddMoreIssues", "Software")?projectId=' + $('option:selected', $('#CombinedProjectId')).val()  " />

                          
                        </div>
                    }
                   
                   
                </div>
                <div class="col-lg-2"></div>
            </div>
        </div>
    </div>

    <div class="portlet box green">
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-cogs"></i>All Project Wise Added Checklist
            </div>
            <div class="tools">
                <a title="" data-original-title="" href="javascript:;" class="collapse"> </a>
                <a title="" data-original-title="" href="#portlet-config" data-toggle="modal" class="config"> </a>
                <a title="" data-original-title="" href="javascript:;" class="reload"> </a>
                <a title="" data-original-title="" href="javascript:;" class="remove"> </a>
            </div>
        </div>
        <div class="portlet-body">
          
            <div class="table-scrollable table-responsive">
                <table id="tbl22" class="table table-bordered table-striped table-condensed flip-content">
                    <thead class="flip-content note note-success">

                        <tr>
                            
                            <th style="text-align: center;">  Checklist </th>
                            <th style="text-align: center;"> Result </th>
                            <th style="text-align: center;"> Issue Details </th>
                            <th style="text-align: center;"> ReferenceModule </th>
                            @*<th style="text-align: center;"> Priority </th>*@
                            <th style="text-align: center;"> Issue Type </th>
                            <th style="text-align: center;"> Frequency </th>
                            <th style="text-align: center;"> Issue Reproduce Path </th>
                            @*<th style="text-align: center;">StartTime (YYYY-MM-DD HH:mm:ss)</th>
                            <th style="text-align: center;">EndTime (YYYY-MM-DD HH:mm:ss)</th>*@
                            <th style="text-align: center;">Upload </th>

                        </tr>
                    </thead>
                    <tbody>
                        @if (Model != null &&  Model.SwQcProjectWiseIssueViewModels.Any())
                        {
                          
                            for (int i = 0; i < Model.SwQcProjectWiseIssueViewModels.Count; i++)
                            {
                                if (Model.SwQcProjectWiseIssueViewModels[i].ProjectMasterId > 0 && Model.SwQcProjectWiseIssueViewModels[i].SwQcAssignId > 0 && Model.SwQcProjectWiseIssueViewModels[i].SwQcInchargeAssignId > 0)
                                {
                                    <tr style="text-align: center">
                                       

                                        @Html.HiddenFor(x => x.SwQcProjectWiseIssueViewModels[i].ProjectMasterId)
                                        @Html.HiddenFor(x => x.SwQcProjectWiseIssueViewModels[i].SwQcAssignId)
                                        @Html.HiddenFor(x => x.SwQcProjectWiseIssueViewModels[i].SwQcInchargeAssignId)
                                        @Html.HiddenFor(model => model.SwQcProjectWiseIssueViewModels[i].UploadedFile, new { @class = "clsRmv" })
                                        <td>@Html.DisplayFor(x => x.SwQcProjectWiseIssueViewModels[i].IssueName)</td>
                                        <td>@Html.DisplayFor(x => x.SwQcProjectWiseIssueViewModels[i].Result)</td>
                                        <td>@Html.DisplayFor(x => x.SwQcProjectWiseIssueViewModels[i].Comment)</td>
                                        <td>@Html.DisplayFor(x => x.SwQcProjectWiseIssueViewModels[i].RefernceModule)</td>
                                        <td>@Html.DisplayFor(x => x.SwQcProjectWiseIssueViewModels[i].IssueType)</td>
                                        <td>@Html.DisplayFor(x => x.SwQcProjectWiseIssueViewModels[i].Frequency)</td>
                                        <td>@Html.DisplayFor(x => x.SwQcProjectWiseIssueViewModels[i].IssueReproducePath)</td>
                                        @*<td>@Html.DisplayFor(x => x.SwQcProjectWiseIssueViewModels[i].StartTime, "{0:yyyy-MM-dd HH:mm:ss tt}")</td>
                                        <td>@Html.DisplayFor(x => x.SwQcProjectWiseIssueViewModels[i].EndTime, "{0:yyyy-MM-dd HH:mm:ss tt}")</td>*@
                                                                              
                                        <td>
                                           
                                            <div class="col-md-8" style="width:400px">
                                                        @if (Model.SwQcProjectWiseIssueViewModels[i].UploadedFileGetUrl1 != null && Model.SwQcProjectWiseIssueViewModels[i].UploadedFileGetUrl1.Any())
                                                        {
                                                            for (int m = 0; m < Model.SwQcProjectWiseIssueViewModels[i].UploadedFileGetUrl1.Count; m++)
                                                            {
                                                                if (Model.SwQcProjectWiseIssueViewModels[i].UploadedFileGetUrl1[m].Length != 0)
                                                                {
                                                                   @Html.TextBoxFor(model => model.SwQcProjectWiseIssueViewModels[i].UploadedFileGetUrl1[m], new { @class = "txtForList", @disabled = "disabled", style = "width:350px;" })
                                                                <br />

                                                                }


                                                            }

                                                        }
                                              
                                            </div>

                                        </td>


                                    </tr>
                                }
                            }
                        }


                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="portlet box green">
      
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-cogs"></i>Add More Checklist
            </div>
          
            <div class="tools">
                <a title="" data-original-title="" href="javascript:;" class="collapse"> </a>
                <a title="" data-original-title="" href="#portlet-config" data-toggle="modal" class="config"> </a>
                <a title="" data-original-title="" href="javascript:;" class="reload"> </a>
                <a title="" data-original-title="" href="javascript:;" class="remove"> </a>
            </div>
        </div>

        <div class="portlet-body">
            <div class="table-scrollable table-responsive">
                <table id="tbl" class="table table-bordered table-striped table-condensed flip-content">
                    <thead class="flip-content">
                        <tr>
                            <th style="display: none;">Index</th>
                            <th style="display: none;">IsRemoved</th>
                            <th> Checklist </th>
                            <th class="numeric"> Result</th>
                            <th style="text-align: center;"> Issue Details </th>
                            <th class="numeric"> RefernceModule </th>
                            @*<th class="numeric" style="display: none"> PhoneType </th>
                            <th class="numeric" style="display: none"> RefBy</th>
                            <th class="numeric"> Priority </th>*@
                            <th class="numeric"> Issue Type </th>
                            <th class="numeric"> Frequency </th>
                            <th class="numeric"> Issue Reproduce Path </th>
                            @*<th class="numeric" style="text-align: center"> StartTime  (YYYY-MM-DD HH:mm:ss)</th>
                            <th class="numeric" style="text-align: center"> EndTime  (YYYY-MM-DD HH:mm:ss)</th>*@
                            <th class="numeric"> Upload </th>
                            @*<th class="numeric"> ProjectMasterID </th>
                            <th class="numeric"> Upload </th>
                            <th class="numeric"> Upload </th>*@
                            <th class="numeric"><button class="btn btn-circle btn-success" id="addmore"><span class="glyphicon glyphicon-plus"></span>Add More</button></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="tableTrCls1" id="trIdForUpload">
                            <td style="display: none;">0</td>
                            <td style="display: none;"><input type="text" name="issueList[0].IsRemoved" class="IsRemoved form-control input-small" value="0" /></td>
                            <td>
                                <input name="issueList[0].IssueName" id="IssueName" type="text" class="form-control input-medium" placeholder="Issue name" />
                            </td>
                            <td class="numeric">
                                <select name="issueList[0].Result" class="form-control input-small">
                                    <option value="">SELECT</option>
                                    <option>DONE</option>
                                    <option>ISSUE</option>
                                    <option>NOT APPLICABLE</option>
                                </select>
                            </td>
                            <td>
                                <div class="form-group">
                                    <textarea name="issueList[0].Comment" class="form-control input-small" rows="4" placeholder="Add Comment"></textarea>
                                </div>
                            </td>
                            <td class="numeric">
                                <select name="issueList[0].RefernceModule" class="form-control input-small RefernceModule"></select>
                            </td>
                            @*<td class="numeric" style="display: none">
                                <select name="issueList[0].PhoneType" class="form-control input-xsmall PhoneType">
                                    <option>Smart</option>
                                    <option>Walpad</option>
                                    <option>Feature</option>
                                </select>
                            </td>
                            <td class="numeric" style="display: none">
                                <select name="issueList[0].RefBy" class="form-control input-small RefBy"></select>
                            </td>*@
                            <td class="numeric">
                                <select name="issueList[0].IssueType" class="form-control input-small">
                                    <option value="">SELECT</option>
                                    <option>MINOR</option>
                                    <option>MAJOR</option>
                                    <option>CRITICAL</option>
                                </select>
                            </td>
                            <td class="numeric">
                                <select name="issueList[0].Frequency" class="form-control input-small">
                                    <option value="">SELECT</option>
                                    <option>ALWAYS</option>
                                    <option>SOMETIMES</option>
                                    <option>RARE</option>
                                </select>
                            </td>
                            <td class="numeric">                         
                                <div class="form-group">
                                    <textarea name="issueList[0].IssueReproducePath" class="form-control input-small" rows="4" placeholder="Add Reproduce Path"></textarea>
                                </div>
                            </td>
                            @*<td class="numeric">
                                
                                <div class="input-group date form_datetime col-lg-12" id="StartTime" data-date=" " data-date-format="yyyy-mm-dd hh:ii:ss" data-link-format="yyyy-mm-dd hh:ii:ss" data-link-field="StartTime">
                                    <input class="form-control input-medium" name="issueList[0].StartTime" id="StartTime" size="66" type="text">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                                </div>

                            </td>
                            <td class="numeric">

                                <div class="input-group date form_datetime col-lg-12" id="EndTime" data-date=" " data-date-format="yyyy-mm-dd hh:ii:ss" data-link-format="yyyy-mm-dd hh:ii:ss" data-link-field="EndTime">
                                    <input class="form-control input-medium" name="issueList[0].EndTime" id="EndTime" size="66" type="text">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                                </div>

                            </td>*@

                            @*<td class="numeric">
                                <input name="issueList[0].File" type="file" multiple="multiple" class="form" />
                            </td>*@
                            <td class="numeric">
                                <div class="col-md-11">
                                    <table class="File11" id="hh1">
                                        <tr id="trIdForFile">
                                            <td class="filesss" id="filesId">

                                                <div class="col-md-9" id="fileIdForCr">
                                                    <input type="file" name="issueList[0].File" id="File11" />
                                                </div>
                                                <div class="col-md-2">
                                                    <button type="button" id="removeProductRow" class="btn btn-circle btn-danger" onclick="removeDetailRow($(this).closest('tr'));">
                                                        <span><i class="fa fa-times" aria-hidden="true"></i></span>
                                                    </button>
                                                </div>
                                                <br /><br />
                                            </td>
                                        </tr>

                                    </table>



                                </div>


                                <div class="col-md-8">
                                    <div class="col-md-2">

                                        <button type="button" id="upPlusBt" class="btn btn-group-circle btn-success center" onclick="javascript: addField('issueList[0].File', $(this).closest('tr'));">
                                            <span><i class="fa fa-plus" aria-hidden="true"></i></span>
                                        </button><br /><br />
                                    </div>

                                    <div class="col-md-6"></div>
                                </div>

                            </td>

                            <td class="numeric">
                                <button class="btn btn-circle btn-danger removeBtn">Remove</button>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
        <div>
            <input type="text" name="pro_id" id="pro_id" value="" style="display:none;" />
            <input type="text" name="swQcIncharge_id" id="swQcIncharge_id" value="" style="display:none;"  />
            <input type="text" name="swQcAssign_id" id="swQcAssign_id" value="" style="display:none;" />
          
        </div>
        <div>
            <input type="text" name="pro_id1" id="pro_id1" value="" style="display:none;" />
            <input type="text" name="swQcIncharge_id1" id="swQcIncharge_id1" value="" style="display:none;" />
            <input type="text" name="swQcAssign_id1" id="swQcAssign_id1" value="" style="display:none;" />

        </div>
    </div>
    <div class="form-actions">
        <button id="btnSubmit" type="submit" class="btn blue">Submit</button>
        <a href="@Url.Action("notyet")" class="btn default">Cancel</a>
    </div>
}


<script>
    function addField(id, td) {
          td.find('.File11').append($("<tr id='trIdForFile'><td class='filesss' id='filesId'><div class='col-md-9' id='fileIdForCr'><input type='file' name='" + id + "' id='File11' /></div> <div class='col-md-2'><button type='button' id='removeProductRow' class='btn btn-circle btn-danger' onclick=removeDetailRow($(this).closest('tr'));> <span><i class='fa fa-times' aria-hidden='true'></i></span></button></div><br /><br /></td></tr>"));

    }

    function removeDetailRow(element) {
        $(element).remove();

    }
    $(document).ready(function () {

        $('#btnforname').on('click', function () {

            var proSelectId = document.getElementById('CombinedProjectId');

            console.log(proSelectId);
            var selecteddropText = proSelectId.options[proSelectId.selectedIndex].text;
            var selecteddropValue = proSelectId.options[proSelectId.selectedIndex].value;
            console.log(selecteddropText);
            console.log(selecteddropValue);

            if (selecteddropText == "Select One") {
                // alert("Please select Project must..........");
                alertify.dialog('alert').set({
                    'title': '   ',
                    'transition': 'zoom',
                    'message': "Please select Project must",
                }).show();
                return false;
            }

        });

    });
    $(function() {
        var index = 0;
        //removeBtn
        $(document).on('click', '.removeBtn', function(e) {
            e.preventDefault();
            $(this).parent().parent().find('td:eq(1)').find('.IsRemoved').val(1);

            $(this).parent().parent().addClass('hiddenColumn');
            $(this).parent().parent().remove();
        });
        //Added Time picker
        $(document).on('focus', '.form_datetime', function (e) {
            $(this).datetimepicker({
                //language:  'fr',
                weekStart: 1,
                todayBtn: 1,
                autoclose: 1,
                todayHighlight: 1,
                startView: 2,
                forceParse: 0,
                use24hours: true,
                useSeconds: false,
                minuteStep: 1,
                format: 'yyyy-mm-dd hh:ii:00'
            });

        });

        $('.form_datetime').on('changeTime', function () {
            $('#EndTime').datetimepicker('option', 'minTime', $(this).val());
        });

        //RefernceModule
        var RefernceModuleresult = commonJqueryAjax('GetRefernceModule', {});
        $(document).on('focus', '.RefernceModule', function(e) {
            if ($(this).has('option').length > 0) {

            } else {
                for (var i = 0; i < RefernceModuleresult.list.length; i++) {
                    var option = '<option value="' + RefernceModuleresult.list[i].Value + '">' + RefernceModuleresult.list[i].Text + '</option>';
                    $(this).append(option);
                }
            }
        });


        $('#addmore').on('click', function(e) {
            e.preventDefault();         
            moment.locale("de");

            var startValue;
            var endValue;
            var startTime;
            var endTime;
            var issueNameForVal;
            
            var proSelectId = document.getElementById('CombinedProjectId');

            console.log(proSelectId);
            var selecteddropText = proSelectId.options[proSelectId.selectedIndex].text;
            var selecteddropValue = proSelectId.options[proSelectId.selectedIndex].value;
            console.log(selecteddropText);
            console.log(selecteddropValue);

            if (selecteddropText == "Select One") {
                // alert("Please select Project must..........");
                alertify.dialog('alert').set({
                    'title': '   ',
                    'transition': 'zoom',
                    'message': "Please select Project must",
                }).show();
                return false;
            }
          
            $("#tbl tr.tableTrCls1").each(function () {
                    
                startValue = $.trim($(this).find('#StartTime').val());
                endValue = $.trim($(this).find('#EndTime').val());
                issueNameForVal = $.trim($(this).find('#IssueName').val());
                
                console.log("issueNameForVal  1:   " + issueNameForVal);
                console.log("starttime  1:   " + startValue);
                console.log("endtime  1:   " + endValue);
                
                startTime = new Date(startValue).getTime(); //1375077000000 
                endTime = new Date(endValue).getTime(); //1375077000000 
           
                console.log("start  1:   " + startTime);
                console.log("end  1:   " + endTime);
                

                if (issueNameForVal == null || issueNameForVal == "undefined" || issueNameForVal == "") {
                    // alert("Please Insert Issues for Adding more issues.");
                    alertify.dialog('alert').set({
                        'title': '   ',
                        'transition': 'zoom',
                        'message': "Please Insert Any Issue for Adding more issues.",
                    }).show();
                    return false;
                }

                if (startTime > endTime) {

                    alertify.dialog('alert').set({
                        'title': '   ',
                        'transition': 'zoom',
                        'message': "StartTime must be smaller than EndTime",
                    }).show();
                    return false;
                }
            });   
      
            console.log("issueNameForVal  :   " + issueNameForVal);
            console.log("starttime  :   " + startValue);
            console.log("endtime  :   " + endValue);
         
            startTime = new Date(startValue).getTime(); //1375077000000 
            endTime = new Date(endValue).getTime(); //1375077000000 
           
            console.log("start  :   " + startTime);
            console.log("end  :   " + endTime);


            if (issueNameForVal == null || issueNameForVal == "undefined" || issueNameForVal == "") {
               // alert("Please Insert Issues for Adding more issues.");
                alertify.dialog('alert').set({
                    'title': '   ',
                    'transition': 'zoom',
                    'message': "Please Insert Any Issue for Adding more issues.",
                }).show();
                return false;
            }

            if (startTime > endTime) {

                alertify.dialog('alert').set({
                    'title': '   ',
                    'transition': 'zoom',
                    'message': "StartTime must be smaller than EndTime",
                }).show();
                return false;
            }


            index++;

            //////////////Code for multiline///////////
            var tr = multiline(function() {

                /*
                <tr class="tableTrCls1" id="trIdForUpload">
                    <td  style="display: none;">$#</td>
                      <td style="display: none;"><input type="text" name="issueList[$#].IsRemoved" class="IsRemoved form-control input-small" value="0"  /></td>
                    <td>
                        <input name="issueList[$#].IssueName" id="IssueName" type="text" class="form-control input-medium" placeholder="Issue name" />
                    </td>
                      <td class="numeric">
                                <select name="issueList[$#].Result" class="form-control input-small">
                                  <option value="">SELECT</option>
                                    <option>DONE</option>
                                    <option>ISSUE</option>
                                    <option>NOT APPLICABLE</option>
                                </select>
                            </td>
                    <td>
                        <div class="form-group">
                            <textarea name="issueList[$#].Comment" class="form-control input-small" rows="4" placeholder="Add location"></textarea>
                        </div>
                    </td>
                    <td class="numeric">
                        <select name="issueList[$#].RefernceModule" class="form-control input-small RefernceModule">
                        </select>
                    </td>

                    <td class="numeric">

                        <select name="issueList[$#].IssueType" class="form-control input-small">
                         <option value="">SELECT</option>
                            <option>MINOR</option>
                            <option>MAJOR</option>
                            <option>CRITICAL</option>
                        </select>
                    </td>
                    <td class="numeric">
                        <select name="issueList[$#].Frequency" class="form-control input-small">
                         <option value="">SELECT</option>
                          <option>ALWAYS</option>
                          <option>SOMETIMES</option>
                          <option>RARE</option>
                        </select>
                    </td>
                    <td class="numeric">                         
                        <div class="form-group">
                            <textarea name="issueList[$#].IssueReproducePath" class="form-control input-small" rows="4" placeholder="Add Reproduce Path"></textarea>
                        </div>
                     </td>
                     <td class="numeric">                            
                                 <div class="col-md-11">
                                     <table class="File11" id="hh1">
                                         <tr id="trIdForFile">
                                             <td class="filesss" id="filesId">

                                                 <div class="col-md-9" id="fileIdForCr">
                                                     <input type="file" name="issueList[$#].File" id="File11" />
                                                 </div>
                                                 <div class="col-md-2">
                                                     <button type="button" id="removeProductRow" class="btn btn-circle btn-danger" onclick="removeDetailRow($(this).closest('tr'));">
                                                         <span><i class="fa fa-times" aria-hidden="true"></i></span>
                                                     </button>
                                                 </div>
                                                 <br /><br />
                                             </td>
                                         </tr>

                                     </table>



                                 </div>


                                 <div class="col-md-8">
                                     <div class="col-md-2">

                                         <button type="button" id="upPlusBt" class="btn btn-group-circle btn-success center" onclick="javascript: addField('issueList[$#].File', $(this).closest('tr'));">
                                             <span><i class="fa fa-plus" aria-hidden="true"></i></span>
                                         </button><br /><br />
                                     </div>

                                     <div class="col-md-6"></div>
                                 </div>

                             </td>
                    <td class="numeric">
                        <button class="btn btn-circle btn-danger removeBtn">Remove</button>
                    </td>
                </tr>
*/
            });

           


            //<td class="numeric">
            //                <input name="issueList[$#].File" type="file"  multiple="multiple" class="form" />
            //            </td>
            //<td class="numeric">
            //            <div class="input-group date form_datetime col-lg-12" data-date=" " data-date-format="yyyy-mm-dd hh:ii" data-link-format="yyyy-mm-dd hh:ii" data-link-field="StartTime">
            //                       <input class="form-control col-lg-12 input-small" name="issueList[$#].StartTime" id="StartTime" size="66" type="text" readonly>
            //                       <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
            //                       <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
            //                   </div>
                              
            //       </td>
            //       <td class="numeric">
            //           <div class="input-group date form_datetime col-lg-12" data-date=" " data-date-format="yyyy-mm-dd hh:ii" data-link-format="yyyy-mm-dd hh:ii" data-link-field="EndTime">
            //                        <input class="form-control col-lg-12 input-small" name="issueList[$#].EndTime" id="EndTime" size="66" type="text" readonly>
            //                       <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
            //                       <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
            //                   </div>
            //       </td>
            //<td class="numeric">
                                
            //                    <div class="input-group date form_datetime col-lg-12" id="StartTime" data-date=" " data-date-format="yyyy-mm-dd hh:ii:ss" data-link-format="yyyy-mm-dd hh:ii:ss" data-link-field="StartTime">
            //                        <input class="form-control input-medium" name="issueList[$#].StartTime" id="StartTime" size="66" type="text">
            //                        <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
            //                        <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
            //                    </div>

            //        </td>
            //        <td class="numeric">

            //            <div class="input-group date form_datetime col-lg-12" id="EndTime" data-date=" " data-date-format="yyyy-mm-dd hh:ii:ss" data-link-format="yyyy-mm-dd hh:ii:ss" data-link-field="EndTime">
            //                <input class="form-control input-medium" name="issueList[$#].EndTime" id="EndTime" size="66" type="text">
            //                <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
            //                <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
            //            </div>

            //        </td>
            var rIndex = index.toString();
            var replaceTr = tr.toString();
            replaceTr = replaceTr.split("$#").join(rIndex);


            // console.log(rIndex + '->' + replaceTr);
            $('#tbl > tbody:last').append(replaceTr);

            for (var i = 0; i < RefernceModuleresult.list.length; i++) {
                console.log(RefernceModuleresult.list[i].Text + "->" + RefernceModuleresult.list[i].Value);
                var option = '<option value="' + RefernceModuleresult.list[i].Value + '">' + RefernceModuleresult.list[i].Text + '</option>';

                $('#tbl >tbody').find('tr').eq(index + 1).find('.RefernceModule').append(option);
            }


        });

        $('#btnSubmit').click(function(e) {
            e.preventDefault();
          

            var startValue;
            var endValue;

            var startTime;
            var endTime;
            var issueNameForVal;
            
            var proSelectId = document.getElementById('CombinedProjectId');

            console.log(proSelectId);
            var selecteddropText = proSelectId.options[proSelectId.selectedIndex].text;
            var selecteddropValue = proSelectId.options[proSelectId.selectedIndex].value;
            console.log(selecteddropText);
            console.log(selecteddropValue);

            if (selecteddropText == "Select One") {
                // alert("Please select Project must..........");
                alertify.dialog('alert').set({
                    'title': '   ',
                    'transition': 'zoom',
                    'message': "Please select Project must",
                }).show();
                return false;
            }

            //$("#tbl tr").each(function () {
            //    //startValue = document.getElementById("StartTime").value;
            //    //endValue = document.getElementById("EndTime").value;
            //    startValue = $(this).find('#StartTime').val();
            //    endValue = $(this).find('#EndTime').val();
            //    issueNameForVal = $(this).find('#IssueName').val();
            //});


            //if (issueNameForVal == null || issueNameForVal == "undefined" || issueNameForVal == "") {
            //    // alert("Please Insert Issues for Adding more issues.");
            //    alertify.dialog('alert').set({
            //        'title': '   ',
            //        'transition': 'zoom',
            //        'message': "Please Insert Any Issue for Submit this Project Issues.",
            //    }).show();
            //    return false;
            //}


            //console.log("starttime  :   " + startValue);
            //console.log("endtime  :   " + endValue);
            
            //startTime = new Date(startValue).getTime(); //1375077000000 
            //endTime = new Date(endValue).getTime(); //1375077000000 

            //console.log("start  :   " + startTime);
            //console.log("end  :   " + endTime);

            //if (startTime > endTime) {

            //    alertify.dialog('alert').set({
            //        'title': '   ',
            //        'transition': 'zoom',
            //        'message': "StartTime must be smaller than EndTime",
            //    }).show();
            //    return false;
            //}
            $("#tbl tr.tableTrCls1").each(function () {
                    
                startValue = $.trim($(this).find('#StartTime').val());
                endValue = $.trim($(this).find('#EndTime').val());
                issueNameForVal = $.trim($(this).find('#IssueName').val());
                

                console.log("issueNameForVal  1:   " + issueNameForVal);
                console.log("starttime  1:   " + startValue);
                console.log("endtime  1:   " + endValue);
                
                startTime = new Date(startValue).getTime(); //1375077000000 
                endTime = new Date(endValue).getTime(); //1375077000000 
           
                console.log("start  1:   " + startTime);
                console.log("end  1:   " + endTime);
                

                if (issueNameForVal == null || issueNameForVal == "undefined" || issueNameForVal == "") {
                    // alert("Please Insert Issues for Adding more issues.");
                    alertify.dialog('alert').set({
                        'title': '   ',
                        'transition': 'zoom',
                        'message': "Please Insert Any Issue for Adding more issues.",
                    }).show();
                    return false;
                }

                if (startTime > endTime) {

                    alertify.dialog('alert').set({
                        'title': '   ',
                        'transition': 'zoom',
                        'message': "StartTime must be smaller than EndTime",
                    }).show();
                    return false;
                }
            });   
      
            console.log("issueNameForVal  :   " + issueNameForVal);
            console.log("starttime  :   " + startValue);
            console.log("endtime  :   " + endValue);
         
            startTime = new Date(startValue).getTime(); //1375077000000 
            endTime = new Date(endValue).getTime(); //1375077000000 
           
            console.log("start  :   " + startTime);
            console.log("end  :   " + endTime);


            if (issueNameForVal == null || issueNameForVal == "undefined" || issueNameForVal == "") {
                // alert("Please Insert Issues for Adding more issues.");
                alertify.dialog('alert').set({
                    'title': '   ',
                    'transition': 'zoom',
                    'message': "Please Insert Any Issue for Adding more issues.",
                }).show();
                return false;
            }

            if (startTime > endTime) {

                alertify.dialog('alert').set({
                    'title': '   ',
                    'transition': 'zoom',
                    'message': "StartTime must be smaller than EndTime",
                }).show();
                return false;
            }

            alertify.confirm('Confirm message', 'Do you want to submit Issues to Software QC Incharge?', function() {
                alertify.success('Ok');

                var obj = [];
                obj.projectMasterId = $("select#CombinedProjectId").val();


                //var ttt = $("select#CombinedProjectId").text();

                //console.log(ttt);
                //for (i = 0; i < ttt.length; i++) {
                //if (ttt == "Select One") {
                //    alert("select");
                //}
                //}
                // console.log(obj.projectMasterId);
                var match = obj.projectMasterId.split(',');
                // console.log(match);



                for (i = 0; i < match.length; i++) {
                    console.log("<br /> Element " + i + " of the array is: " + match[i]);

                    obj.pro_id = match[0];
                    obj.swQcIncharge_id = match[1];
                    obj.swQcAssign_id = match[2];

                }
                //console.log(obj.pro_id);
                //console.log(obj.swQcIncharge_id);
                //console.log(obj.swQcAssign_id);

                $('#pro_id').val(obj.pro_id);
                $('#swQcIncharge_id').val(obj.swQcIncharge_id);
                $('#swQcAssign_id').val(obj.swQcAssign_id);


                $('#form1').trigger('submit');

            }, function() {
                alertify.error('Cancel');

            });

        });

  
    });  
    $(document).on('submit', 'form', function () {
        var buttons = $(this).find('[type="submit"]');
        if ($(this).valid()) {
            buttons.each(function (btn) {
                $(buttons[btn]).prop('disabled', true);
            });
        } else {
            buttons.each(function (btn) {
                $(buttons[btn]).prop('disabled', false);
            });
        }
    });
</script>
